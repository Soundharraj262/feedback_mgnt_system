<!-- Mobile Menu Toggle -->
<button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
    <i class="fas fa-bars"></i>
</button>

<aside class="sidebar" id="sidebar">
    <!-- Logo/Brand -->
    <div class="sidebar-brand">
        <h2>
            <i class="fas fa-graduation-cap"></i>
            <span>Feedback</span>
        </h2>
        <p style="font-size: 0.8125rem; color: var(--gray-600); margin-top: 0.5rem; font-weight: 500;">
            <%= userRole==='super_admin' ? 'Super Admin Panel' : userRole==='staff' ? 'Staff Portal' : 'Student Portal'
                %>
        </p>
    </div>

    <!-- User Info -->
    <div
        style="background: linear-gradient(135deg, var(--gray-50) 0%, var(--gray-100) 100%); padding: 1.25rem; border-radius: var(--radius-xl); margin-top: 1.5rem; border: 1px solid var(--gray-200);">
        <div style="display: flex; align-items: center; gap: 1rem;">
            <div
                style="width: 48px; height: 48px; background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; font-size: 1.125rem; box-shadow: var(--shadow-md);">
                <%= userName ? userName.charAt(0).toUpperCase() : 'U' %>
            </div>
            <div style="flex: 1; min-width: 0;">
                <div
                    style="font-weight: 700; font-size: 0.9375rem; color: var(--gray-900); white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                    <%= userName || 'User' %>
                </div>
                <div
                    style="font-size: 0.8125rem; color: var(--gray-600); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 0.125rem;">
                    <%= userEmail || '' %>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation Menu -->
    <nav>
        <ul class="nav-menu">
            <% if (userRole==='super_admin' ) { %>
                <li class="nav-item">
                    <a href="/admin/dashboard" class="nav-link <%= title.includes('Dashboard') ? 'active' : '' %>">
                        <i class="fas fa-chart-line"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/admin/staff" class="nav-link <%= title.includes('Staff') ? 'active' : '' %>">
                        <i class="fas fa-users"></i>
                        <span>Staff Management</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/admin/students" class="nav-link <%= title.includes('Student') ? 'active' : '' %>">
                        <i class="fas fa-user-graduate"></i>
                        <span>Student Management</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/admin/assignments" class="nav-link <%= title.includes('Assignment') ? 'active' : '' %>">
                        <i class="fas fa-link"></i>
                        <span>Assignments</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/admin/feedback" class="nav-link <%= title.includes('Feedback') ? 'active' : '' %>">
                        <i class="fas fa-comments"></i>
                        <span>Feedback Overview</span>
                    </a>
                </li>
                <% } else if (userRole==='staff' ) { %>
                    <li class="nav-item">
                        <a href="/staff/dashboard" class="nav-link <%= title.includes('Dashboard') ? 'active' : '' %>">
                            <i class="fas fa-chart-line"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/staff/students" class="nav-link <%= title.includes('Students') ? 'active' : '' %>">
                            <i class="fas fa-user-graduate"></i>
                            <span>My Students</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/staff/feedback"
                            class="nav-link <%= title.includes('Feedback') || title.includes('Inbox') ? 'active' : '' %>">
                            <i class="fas fa-inbox"></i>
                            <span>Feedback Inbox</span>
                        </a>
                    </li>
                    <% } else if (userRole==='student' ) { %>
                        <li class="nav-item">
                            <a href="/student/dashboard"
                                class="nav-link <%= title.includes('Dashboard') ? 'active' : '' %>">
                                <i class="fas fa-chart-line"></i>
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/student/submit" class="nav-link <%= title.includes('Submit') ? 'active' : '' %>">
                                <i class="fas fa-paper-plane"></i>
                                <span>Submit Feedback</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="/student/feedback"
                                class="nav-link <%= title.includes('My Feedback') || title.includes('Feedback Detail') ? 'active' : '' %>">
                                <i class="fas fa-history"></i>
                                <span>My Feedback</span>
                            </a>
                        </li>
                        <% } %>
        </ul>
    </nav>

    <!-- Logout Button -->
    <div style="margin-top: auto; padding-top: 2rem;">
        <a href="/logout" class="btn btn-secondary" style="width: 100%; justify-content: center;">
            <i class="fas fa-sign-out-alt"></i>
            <span>Logout</span>
        </a>
    </div>
</aside>

<script>
    function toggleMobileMenu() {
        const sidebar = document.getElementById('sidebar');
        sidebar.classList.toggle('open');
    }

    // Close sidebar when clicking outside on mobile
    document.addEventListener('click', function (event) {
        const sidebar = document.getElementById('sidebar');
        const toggle = document.querySelector('.mobile-menu-toggle');

        if (window.innerWidth <= 768) {
            if (!sidebar.contains(event.target) && !toggle.contains(event.target)) {
                sidebar.classList.remove('open');
            }
        }
    });
</script>