<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/head') %>
</head>

<body>
    <div class="main-layout">
        <%- include('../partials/sidebar') %>

            <div class="main-content">
                <%- include('../partials/header') %>

                    <main>
                        <div class="fade-in">
                            <!-- Breadcrumb -->
                            <div style="margin-bottom: 1.5rem;">
                                <nav
                                    style="display: flex; align-items: center; gap: 0.5rem; font-size: 0.875rem; color: var(--gray-600);">
                                    <a href="/admin/dashboard"
                                        style="color: var(--gray-600); text-decoration: none; hover: color: var(--primary-color);">
                                        <i class="fas fa-home"></i> Dashboard
                                    </a>
                                    <i class="fas fa-chevron-right" style="font-size: 0.75rem;"></i>
                                    <a href="/admin/staff" style="color: var(--gray-600); text-decoration: none;">
                                        Staff
                                    </a>
                                    <i class="fas fa-chevron-right" style="font-size: 0.75rem;"></i>
                                    <span style="color: var(--primary-color); font-weight: 600;">
                                        <%= action==='add' ? 'Add' : 'Edit' %>
                                    </span>
                                </nav>
                            </div>

                            <div class="grid grid-2" style="align-items: start;">
                                <!-- Form Card -->
                                <div class="card">
                                    <div class="card-header">
                                        <h3 class="card-title"
                                            style="display: flex; align-items: center; gap: 0.75rem;">
                                            <i class="fas fa-<%= action === 'add' ? 'user-plus' : 'user-edit' %>"></i>
                                            <%= action==='add' ? 'Add New Staff Member' : 'Edit Staff Member' %>
                                        </h3>
                                    </div>
                                    <div class="card-body">
                                        <form class="ajax-form"
                                            action="/admin/staff/<%= action === 'add' ? 'add' : 'edit/' + staff.id %>"
                                            method="POST" data-reload="true">
                                            <div class="form-group">
                                                <label class="form-label">
                                                    <i class="fas fa-user"></i> Full Name *
                                                </label>
                                                <input type="text" name="name" class="form-control"
                                                    value="<%= staff ? staff.name : '' %>" placeholder="Enter full name"
                                                    required>
                                            </div>

                                            <div class="form-group">
                                                <label class="form-label">
                                                    <i class="fas fa-envelope"></i> Email Address *
                                                </label>
                                                <input type="email" name="email" class="form-control"
                                                    value="<%= staff ? staff.email : '' %>"
                                                    placeholder="staff@example.com" required>
                                                <small
                                                    style="color: var(--gray-600); font-size: 0.8125rem; margin-top: 0.5rem; display: block;">
                                                    <i class="fas fa-info-circle"></i> This will be used for login
                                                </small>
                                            </div>

                                            <% if (action==='add' ) { %>
                                                <div class="form-group">
                                                    <label class="form-label">
                                                        <i class="fas fa-lock"></i> Password *
                                                    </label>
                                                    <input type="password" name="password" class="form-control"
                                                        placeholder="Enter password" required>
                                                    <small
                                                        style="color: var(--gray-600); font-size: 0.8125rem; margin-top: 0.5rem; display: block;">
                                                        <i class="fas fa-info-circle"></i> Minimum 6 characters
                                                    </small>
                                                </div>
                                                <% } %>

                                                    <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                                                        <button type="submit" class="btn btn-primary" style="flex: 1;">
                                                            <i class="fas fa-save"></i>
                                                            <%= action==='add' ? 'Add Staff Member' : 'Save Changes' %>
                                                        </button>
                                                        <a href="/admin/staff" class="btn btn-secondary">
                                                            <i class="fas fa-times"></i> Cancel
                                                        </a>
                                                    </div>
                                        </form>
                                    </div>
                                </div>

                                <!-- Info Card -->
                                <div class="card"
                                    style="background: linear-gradient(135deg, var(--info-color) 0%, #2563eb 100%); color: white; border: none;">
                                    <div class="card-body">
                                        <div
                                            style="width: 64px; height: 64px; background: rgba(255,255,255,0.2); border-radius: var(--radius-xl); display: flex; align-items: center; justify-content: center; margin-bottom: 1.5rem;">
                                            <i class="fas fa-info-circle" style="font-size: 2rem;"></i>
                                        </div>
                                        <h4 style="color: white; margin-bottom: 1rem; font-size: 1.25rem;">Staff Member
                                            Information</h4>
                                        <ul
                                            style="list-style: none; padding: 0; margin: 0; color: rgba(255,255,255,0.9); line-height: 2;">
                                            <li
                                                style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 0.75rem;">
                                                <i class="fas fa-check-circle"
                                                    style="margin-top: 0.25rem; flex-shrink: 0;"></i>
                                                <span>Staff can view and manage assigned students</span>
                                            </li>
                                            <li
                                                style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 0.75rem;">
                                                <i class="fas fa-check-circle"
                                                    style="margin-top: 0.25rem; flex-shrink: 0;"></i>
                                                <span>They can reply to student feedback</span>
                                            </li>
                                            <li
                                                style="display: flex; align-items: start; gap: 0.75rem; margin-bottom: 0.75rem;">
                                                <i class="fas fa-check-circle"
                                                    style="margin-top: 0.25rem; flex-shrink: 0;"></i>
                                                <span>Email must be unique in the system</span>
                                            </li>
                                            <li style="display: flex; align-items: start; gap: 0.75rem;">
                                                <i class="fas fa-check-circle"
                                                    style="margin-top: 0.25rem; flex-shrink: 0;"></i>
                                                <span>Assign students after creating staff member</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </main>

                    <%- include('../partials/footer') %>
            </div>
    </div>

    <script src="/js/main.js"></script>
</body>

</html>
